<!-- Ejemplares traidos de la tabla ejemplares_view -->
<!-- Ejemplares traidos de la tabla ejemplares_view -->

<div class="books-container">
    <h2>Visualización de Ejemplares Disponibles</h2>


    <div class="search-container">
        <label for="title">Título:</label>
        <input [(ngModel)]="searchTitle" (ngModelChange)="filtrarLibros()" placeholder="Buscar título">
        <label for="author">Autor:</label>
        <input [(ngModel)]="searchAuthor" (ngModelChange)="filtrarLibros()" placeholder="Buscar autor">

    </div>

    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

        <!-- Id Ejemplar Column -->
        <ng-container matColumnDef="Ejemplar">
            <th mat-header-cell *matHeaderCellDef> Id Ejemplar </th>
            <td mat-cell *matCellDef="let libro"> {{libro.Ejemplar}} </td>
        </ng-container>

        <!-- Título Column -->
        <ng-container matColumnDef="titulo">
            <th mat-header-cell *matHeaderCellDef> Título </th>
            <td mat-cell *matCellDef="let libro"> {{libro.titulo}} </td>
        </ng-container>

        <!-- Autor Column -->
        <ng-container matColumnDef="autor">
            <th mat-header-cell *matHeaderCellDef> Autor </th>
            <td mat-cell *matCellDef="let libro"> {{libro.Autor}} </td>
        </ng-container>

        <!-- Editorial Column -->
        <ng-container matColumnDef="editorial">
            <th mat-header-cell *matHeaderCellDef> Editorial </th>
            <td mat-cell *matCellDef="let libro"> {{libro.Editorial}} </td>
        </ng-container>

        <!-- Categoría Column -->
        <ng-container matColumnDef="categoria">
            <th mat-header-cell *matHeaderCellDef> Categoría </th>
            <td mat-cell *matCellDef="let libro"> {{libro.Categoria}} </td>
        </ng-container>

        <!-- Edición Column -->
        <ng-container matColumnDef="edicion">
            <th mat-header-cell *matHeaderCellDef> Edición </th>
            <td mat-cell *matCellDef="let libro"> {{libro.edicion}} </td>
        </ng-container>

        <!-- Estado Column solicitado, aceptado, rechazado, entregado, disponible -->
        <ng-container matColumnDef="estado">
            <th mat-header-cell *matHeaderCellDef> Estado </th>
            <td mat-cell *matCellDef="let libro">
                <mat-form-field appearance="outline">
                    <mat-select [(ngModel)]="libro.Estado" (selectionChange)="markAsEdited(libro)">
                        <mat-option *ngFor="let estado of estados" [value]="estado">
                            {{estado}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
        </ng-container>

        <!-- Usuario Column -->
        <ng-container matColumnDef="usuario">
            <th mat-header-cell *matHeaderCellDef> Usuario </th>
            <td mat-cell *matCellDef="let libro">
                <mat-form-field appearance="outline">
                    <mat-select [(ngModel)]="libro.Usuario" (selectionChange)="markAsEdited(libro)">
                        <mat-option *ngFor="let usuario of usuarios" [value]="usuario">
                            {{usuario}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
        </ng-container>

        <!-- Fecha Column -->
        <ng-container matColumnDef="fecha">
            <th mat-header-cell *matHeaderCellDef> Fecha pedido </th>
            <td mat-cell *matCellDef="let libro"> {{libro.fecha_pedido}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10]"></mat-paginator>
    <!-- Botón Añadir Ejemplar -->
    <div class="button-container">
        <button mat-raised-button color="primary" (click)="openAddEjemplarModal()">Añadir Ejemplar</button>
        <button mat-raised-button color="accent" (click)="guardarDatos()" [disabled]="!isEdited">Guardar Datos</button>
    </div>
</div>




<!-- <ng-container matColumnDef="estado">
    <th mat-header-cell *matHeaderCellDef> Estado </th>
    <td mat-cell *matCellDef="let libro"> {{libro.Estado}} </td>
</ng-container>


<ng-container matColumnDef="usuario">
    <th mat-header-cell *matHeaderCellDef> Usuario </th>
    <td mat-cell *matCellDef="let libro"> {{libro.Usuario}} </td>
</ng-container> -->